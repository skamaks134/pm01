# pm01
Задание 2. Объясните, что такое LACP и для чего он используется. Опишите процесс формирования LACP агрегированных каналов. Какие преимущества использования LACP по сравнению с другими методами агрегации каналов? Какие состояния могут быть у LACP портов и что они означают? Вам необходимо настроить LACP в соответствии с предоставленным топологическим планом. Также нужно провести диагностику и устранение неполадок(если есть) в конфигурации LACP. У вас есть два коммутатора Cisco Catalyst 2960 - SW1 и SW2. Коммутаторы соединены двумя линками: Линк 1: Порт FastEthernet0/1 на SW1 подключен к порту FastEthernet0/1 на SW2; Линк 2: Порт FastEthernet0/2 на SW1 подключен к порту FastEthernet0/2 на SW2.
Ответ на Задание 2: LACP (Link Aggregation Control Protocol)
1. Что такое LACP и для чего он используется?
LACP (IEEE 802.3ad) — это протокол динамической агрегации каналов, который объединяет несколько физических линков в один логический для:

Увеличения пропускной способности (суммирование скорости портов).

Обеспечения отказоустойчивости (если один линк отвалится, трафик пойдет через другие).

Балансировки нагрузки (трафик распределяется между линками).

2. Процесс формирования LACP-агрегированных каналов
Настройка LACP на коммутаторах:

Создается Port-Channel (логический интерфейс).

Порты добавляются в группу агрегации.

Указывается режим LACP (active или passive).

Обмен LACP-пакетами (PDU):

Устройства обмениваются служебными кадрами для согласования параметров.

Формирование агрегированного канала:

Если настройки совпадают, линки объединяются в один логический канал.

3. Преимущества LACP перед другими методами агрегации
Метод	Преимущества LACP
Статическая агрегация (без LACP)	LACP автоматически проверяет работоспособность линков.
PAgP (Cisco-proprietary)	LACP — стандартный протокол (межвендорная совместимость).
Load Balancing без агрегации	LACP обеспечивает отказоустойчивость и балансировку.
4. Состояния LACP-портов
Состояние	Описание
Active	Порт активно пытается установить LACP-агрегацию.
Passive	Порт отвечает на LACP-запросы, но не инициирует их.
Bundle	Порт успешно агрегирован в Port-Channel.
Individual	Порт не смог объединиться (несовместимые настройки).
Настройка LACP между SW1 и SW2
Топология
Линк 1: SW1: Fa0/1 ↔ SW2: Fa0/1

Линк 2: SW1: Fa0/2 ↔ SW2: Fa0/2

Конфигурация на SW1
bash
enable
configure terminal
interface range FastEthernet0/1-2
  channel-group 1 mode active  # Включаем LACP в активном режиме
  exit
interface Port-channel 1
  switchport mode trunk  # Если используется VLAN
  exit
end
Конфигурация на SW2
bash
enable
configure terminal
interface range FastEthernet0/1-2
  channel-group 1 mode active
  exit
interface Port-channel 1
  switchport mode trunk
  exit
end
Проверка работы LACP
bash
show etherchannel summary  # Проверка состояния агрегации
show lacp neighbor  # Проверка соседних LACP-устройств
Диагностика неполадок
Порты не агрегируются:

Проверить, что на обоих коммутаторах одинаковые настройки (active/active или active/passive).

Убедиться, что кабели исправны и порты включены (no shutdown).

Нет трафика через Port-Channel:

Проверить, что VLAN разрешены на trunk-портах (switchport trunk allowed vlan ...).

Задание 3. Объясните, что такое OSPF и как он работает. Опишите процесс выбора DR (Designated Router) и BDR (Backup Designated Router). Какие типы LSAs (Link State Advertisements) существуют и какую информацию они несут? Как OSPF определяет стоимость пути (path cost) и какие параметры влияют на этот расчет? Вам необходимо настроить OSPF в соответствии с предоставленным топологическим планом, также нужно провести диагностику и устранение неполадок(если есть) в сети OSPF.  У вас есть три коммутатора Cisco 2960 - SW1, SW2 и SW3. Сеть состоит из следующих сегментов: Сегмент 1: SW1 подключен к SW2 через сеть 10.0.12.0/24; Сегмент 2: SW2 подключен к SW3 через сеть 10.0.23.0/24; Сегмент 3: SW1 подключен к SW3 через сеть 10.0.13.0/24. Все три коммутатора также подключены к своим локальным сетям: SW1: 192.168.1.0/24; SW2: 192.168.2.0/24; SW3: 192.168.3.0/24.

Ответ на Задание 3: OSPF (Open Shortest Path First)
1. Что такое OSPF и как он работает?
OSPF — это протокол динамической маршрутизации, основанный на алгоритме Dijkstra.

Использует Link-State Advertisements (LSA) для обмена информацией о топологии.

Работает в multi-area иерархии (Area 0 — backbone).

Метрика (cost) вычисляется по формуле:

c
o
s
t
=
10
8
b
a
n
d
w
i
d
t
h
(
b
p
s
)
cost= 
bandwidth(bps)
10 
8
 
​
 
(например, для 100 Mbps: cost = 1).

2. Выбор DR (Designated Router) и BDR (Backup DR)
DR отвечает за рассылку LSA в multi-access-сетях (Ethernet).

BDR становится DR в случае его отказа.

Выбор происходит по приоритету (priority):

Если приоритет 0 — устройство не участвует в выборе.

Если приоритеты равны — выбирается устройство с наибольшим Router ID.

3. Типы LSA
Тип LSA	Описание
Type 1 (Router LSA)	Описывает линки маршрутизатора внутри area.
Type 2 (Network LSA)	Генерируется DR для multi-access-сетей.
Type 3 (Summary LSA)	Анонсирует маршруты между area (от ABR).
Type 5 (External LSA)	Анонсирует внешние маршруты (из EIGRP/static).
4. Расчет стоимости пути (cost)
Зависит от пропускной способности интерфейса (например, 100 Mbps → cost=1, 10 Mbps → cost=10).

Можно изменить вручную:

bash
interface FastEthernet0/1
  ip ospf cost 50
Настройка OSPF между SW1, SW2, SW3
Топология
Сегмент 1: SW1 ↔ SW2 (10.0.12.0/24)

Сегмент 2: SW2 ↔ SW3 (10.0.23.0/24)

Сегмент 3: SW1 ↔ SW3 (10.0.13.0/24)

Локальные сети:

SW1: 192.168.1.0/24

SW2: 192.168.2.0/24

SW3: 192.168.3.0/24

Конфигурация на SW1
bash
enable
configure terminal
router ospf 1
  network 10.0.12.0 0.0.0.255 area 0
  network 10.0.13.0 0.0.0.255 area 0
  network 192.168.1.0 0.0.0.255 area 0
  exit
end
Конфигурация на SW2
bash
router ospf 1
  network 10.0.12.0 0.0.0.255 area 0
  network 10.0.23.0 0.0.0.255 area 0
  network 192.168.2.0 0.0.0.255 area 0
  exit
Конфигурация на SW3
bash
router ospf 1
  network 10.0.13.0 0.0.0.255 area 0
  network 10.0.23.0 0.0.0.255 area 0
  network 192.168.3.0 0.0.0.255 area 0
  exit
Проверка работы OSPF
bash
show ip ospf neighbor  # Проверка соседей
show ip route ospf     # Таблица маршрутизации OSPF
show ip ospf database  # База данных LSA
Диагностика неполадок
Нет соседей (neighbors):

Проверить, что интерфейсы в одном Area.

Убедиться, что нет ACL/Firewall, блокирующих OSPF (пакеты 224.0.0.5 и 224.0.0.6).

Маршруты не появляются:

Проверить network-команды в OSPF.

Убедиться, что интерфейсы не в passive-interface.

